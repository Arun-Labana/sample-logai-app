<?xml version="1.0" encoding="UTF-8"?>
<configuration>

    <!-- Console appender for local viewing -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- LogAI Remote Appender - sends logs to Supabase -->
    <appender name="LOGAI_REMOTE" class="com.logai.remote.RemoteLogAppender">
        <!-- Supabase Configuration -->
        <supabaseUrl>https://rdlhvdpuxddbryhepukn.supabase.co</supabaseUrl>
        <supabaseKey>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJkbGh2ZHB1eGRkYnJ5aGVwdWtuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0MDQyNjksImV4cCI6MjA3OTk4MDI2OX0.8Pm2NH4twqhtJgBxdysbmB-y6V-dh_-FHwyUJUHG5kk</supabaseKey>
        
        <!-- App ID from LogAI Dashboard -->
        <appId>0f445744-70ba-4422-9d97-7ecde2ac8eb3</appId>
        
        <!-- Only send WARN and above to remote (to reduce noise) -->
        <threshold>WARN</threshold>
        
        <!-- Batch settings -->
        <batchSize>10</batchSize>
        <flushIntervalMs>2000</flushIntervalMs>
    </appender>

    <!-- Root logger -->
    <root level="DEBUG">
        <appender-ref ref="CONSOLE" />
        <appender-ref ref="LOGAI_REMOTE" />
    </root>

</configuration>

